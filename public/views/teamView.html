<div class="panel panel-default">
    <div class="panel-heading">
        <h4>Pana Reporter</h4>

        <div class="btn-group pull-right">
            <md-button ng-href="#dashboard" class="btn md-raised btn-sm">{{currentUser.name}}</md-button>
            <md-button ng-click="logout()" class="btn md-raised btn-sm">LogOut</md-button>
        </div>
    </div>
</div>
<hr>
<alert class="alert-style" ng-repeat="alert in alerts" type="{{alert.type}}" close="alerts.splice(0,1)">{{alert.msg}}
</alert>
<tabset justified="true">
    <tab heading="Members">
        <table class="table table-hover">
            <tr>
                <th class="text-center">Name</th>
                <th class="text-center">Email</th>
                <th class="text-center">Delete from Team</th>
            </tr>
            <tr ng-repeat="member in thisTeam.members">
                <td>{{member.name}}</td>
                <td>{{member.email}}</td>
                <td>
                    <md-button class="btn md-warn md-raised btn-block">Delete</md-button>
                </td>
            </tr>
            <tr>
                <td><input class="form-control" type="text" placeholder="Name" ng-model="addUser.name"></td>
                <td><input class="form-control" type="email" placeholder="Email" ng-model="addUser.email"></td>
                <td>
                    <md-button class="btn md-raised md-primary btn-block" ng-click="addMember(addUser); addUser=null"
                               ng-disabled="!addUser.name||!addUser.email">Add Member
                    </md-button>
                </td>

            </tr>
        </table>
    </tab>
    <tab heading="Reports">
        <md-button class="md-primary md-raised btn btn-md" ng-show="showButton" ng-click="showButton=false;showRepSub=true;">Submit
            / Edit Today's Report
        </md-button>

        <div ng-show="showRepSub" class="text-center">

            <hr style="clear: both">
            <table class="table table-hover one-line" ng-init="data123=[{questions:null.question,answers:null}]">
                <tr ng-repeat="question in $root.thisTeam.reportSettings.questions">
                    <label>
                        <td class="saparate-line">Q:{{$index+1}} {{question.question}}
                            <input type="hidden" class="form-control hidden"
                                   value="{{data123[$index].questions=question.question}}"/>
                        </td>
                        <td class="saparate-line">
                            <textarea ng-model="data123[$index].answers" class="form-control" rows="3"></textarea>
                        </td>
                    </label>
                </tr>
            </table>
            <md-button class="md-raised md-primary btn-lg"
                       ng-disabled="!data123[0].answers || !data123[1].answers || !data123[2].answers"
                       ng-click="submitReport(data123); data123=[];showRepSub=false;showButton=true;">Submit
            </md-button>
        </div>
        <hr>

        <div class="form-group" ng-repeat="userReport in thisReports">
            <details>
                <summary class="btn btn-lg btn-info btn-block text-align-class-left">
                    {{userReport.userId.name}}'s Report of Date
                    {{userReport.submitDate}}
                    Sumitted at {{userReport.submitTime}}
                </summary>
                <table class="table table-hover text-center">
                    <tr ng-repeat="singleReport in userReport.reports">
                        <td class="saparate-line"><b>Q:{{$index+1}} {{singleReport.questions}}</b></td>
                        <td class="saparate-line" value="singleReport.answers=singleReport.answers.replace('\n','<br />')">{{singleReport.answers}}</td>
                    </tr>
                </table>
            </details>
        </div>
        <div class="pull-right one-line">
            <b class="text-justify text-info">See Reports of</b>
            <hr>
            <datepicker ng-model="reportOfDate" ng-change="getReportOf(reportOfDate)" show-weeks="true" class="well well-sm"></datepicker>
        </div>
    </tab>
    <tab heading="Report Settings" disabled="isNotAdmin">
        <div class="row">
            <div class="col-md-12">
                <div class="login-panel panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Report Settings{{isNotAdmin}}</h3>
                    </div>
                    <div class="panel-body">
                        <form role="form">
                            <fieldset>
                                <div class="form-group">
                                    <ul class="list-group">
                                        <li class="item list-group-item text-center">Report Questions</li>
                                        <li class="item list-group-item text-center">Drag & Drop to change the Questions
                                            Order
                                        </li>
                                        <li class="item list-group-item" ui-sortable="sortableOptions"
                                            ng-model="thisTeam.reportSettings.questions">
                                            <div class="input-group"
                                                 ng-repeat="question in thisTeam.reportSettings.questions">
                                                    <span class="input-group-addon  size-adjust2">
                                                            <span class="glyphicon glyphicon-move"
                                                                  style="font-size: 18px"></span>
                                                    </span>
                                                <input type="text" class="form-control size-adjust"
                                                       ng-model="question.question">
                                                    <span class="input-group-btn" style="height: 35px !important;">
                                                           <md-button class="btn md-raised md-warn"
                                                                      ng-click="deleteThisQuestion($index)">Delete
                                                           </md-button>
                                                        </span>
                                            </div>
                                        </li>
                                        <li class="item list-group-item">
                                            <div class="input-group">
                                                <input type="text" class="form-control size-adjust"
                                                       ng-model="addQuestionData" placeholder="{{addquesPlace}}">
                                                    <span class="input-group-btn">
                                                        <md-button class="btn btn-success md-primary md-raised"
                                                                   ng-click="addQuestions(addQuestionData);addQuestionData=null">
                                                            Add Question
                                                        </md-button>
                                                    </span>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <div class="text-center">
                                    <b>Days to Send Reporting Email</b>
                                </div>
                                <br>

                                <div class="form-group text-center">
                                    <span ng-repeat="e in thisTeam.reportSettings.daysForReportMail track by $index">
                                            <md-checkbox ng-model="thisTeam.reportSettings.daysForReportMail[$index]">
                                                {{days[$index]}}
                                            </md-checkbox>
                                    </span>
                                </div>
                                <hr>
                                <div class="text-center">
                                    <b>Days to Send Reminder Email</b>
                                </div>
                                <br>

                                <div class="form-group text-center">
                                        <span ng-repeat="e in thisTeam.reportSettings.daysForReminderMail track by $index">
                                            <md-checkbox ng-model="thisTeam.reportSettings.daysForReminderMail[$index]">
                                                {{days[$index]}}
                                            </md-checkbox>
                                        </span>
                                </div>
                                <hr>
                                <div class="form-group text-center">
                                    <label>
                                        Time to Send Report Mail
                                        <select ng-model="thisTeam.reportSettings.timeForReportMail">
                                            <option ng-repeat="reportTime in [] | range:0:24">{{reportTime}}</option>
                                        </select>
                                    </label>
                                    |
                                    <label>
                                        Time to Send Reminder Mail
                                        <select ng-model="thisTeam.reportSettings.timeForReminderMail">
                                            <option ng-repeat="reportTime in [] | range:0:24">{{reportTime}}</option>
                                        </select>
                                    </label>
                                </div>
                                <div class="form-group">
                                    <hr>
                                    <md-button ng-click="saveChanges()"
                                               class="btn btn-lg md-raised md-primary btn-block">Save
                                    </md-button>
                                </div>
                            </fieldset>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </tab>
    <tab heading="Team Settings" disabled="isNotAdmin">

        <div class="row">
            <div class="col-md-12">
                <div class="login-panel panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Team Settings</h3>
                    </div>
                    <div class="panel-body">
                        <form role="form">
                            <fieldset>
                                <ul class="list-group">
                                    <li class="item list-group-item text-center">Team Name</li>
                                    <li class="item list-group-item">
                                        <div class="input-group col-md-4">
                                            <!--<input type="text" class="form-control col-md-offset-12" ng-model="thisTeam.name" placeholder="Team name" autofocus>-->
                                            <md-text-float label="Team name" ng-model="thisTeam.name"></md-text-float>
                                        </div>
                                        <div class="form-group text-center">
                                            <md-button ng-disabled="!thisTeam.name" ng-click="saveChanges()"
                                                       class="btn btn-lg md-raised md-primary">Save
                                            </md-button>
                                        </div>
                                    </li>
                                </ul>
                                <div class="form-group">
                                    <hr>
                                    <md-button ng-click="deleteTeam()" class="btn btn-lg md-raised md-warn btn-block">
                                        Delete Team
                                    </md-button>
                                </div>
                            </fieldset>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </tab>
</tabset>
